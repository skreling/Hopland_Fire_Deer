---
title: "Straightness_Index"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This script calcualtes straightness indices for deer movement

# Load Libraries
```{r}
packages <- c('trajr','sp','lubridate','tidyverse')

install_load <- function(packages){
     for (p in packages) {
          if (p %in% rownames(installed.packages())) {
               library(p, character.only=TRUE)
          } else {
               install.packages(p)
               library(p,character.only = TRUE)
          }
     }
}

install_load(packages)
```


# Pre Fire
```{r}
prefire <- read.csv(here::here("Publication_Data","Collars","deer-gps-prefire.csv"))

prefire_straightness <- list()
for(i in unique(deer$AnimalID)) {
  deer_subset <- prefire %>% 
    filter(AnimalID == i)
  
  trj <- TrajFromCoords(data.frame(x = deer_subset$Easting,
                                   y = deer_subset$Northing,
                                   times = deer_subset$Time))
  
  prefire_straightness[[i]] <- TrajStraightness(trj)
}

prefire_straightness

```



# Post Fire
```{r}
postfire <- read.csv(here::here("Publication_Data","Collars","deer-gps-postfire.csv"))

postfire_straightness <- list()
for(i in unique(deer$AnimalID)) {
  deer_subset <- postfire %>% 
    filter(AnimalID == i)
  
  trj <- TrajFromCoords(data.frame(x = deer_subset$Easting,
                                   y = deer_subset$Northing,
                                   times = deer_subset$Time))
  
  postfire_straightness[[i]] <- TrajStraightness(trj)
}

postfire_straightness
```

